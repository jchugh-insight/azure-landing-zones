{
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "0.1.2-preview",
    "parameters": {
        "basics": [
            {}
        ],
        "steps": [
            {
                "name": "esNaming",
                "label": "Naming Prefixes",
                "subLabel": {
                    "preValidation": "Provide naming prefix values for all Azure resources that will be created.",
                    "postValidation": "Done"
                },
                "bladeTitle": "Naming Prefixes",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "Tenant level deployments require access at the tenant root (/) scope. Visit this link to ensure you have the appropriate RBAC permission to complete the deployment",
                            "uri": "https://docs.microsoft.com/azure/role-based-access-control/elevate-access-global-admin"
                        }
                    },
                    {
                        "name": "textBlock0",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Please provide naming prefixes for the Company, Location and Subscription identifiers:"
                        }
                    },
                    {
                        "name": "esComIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Company Identifier Prefix",
                        "toolTip": "Provide a value for the company identifier, 1-5 characters.",
                        "defaultValue": "sjt",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{1,5}$",
                            "validationMessage": "The prefix must be 1-5 characters."
                        }
                    },
                    {
                        "name": "esLocIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Location Identifier Prefix",
                        "toolTip": "Provide a value for the location identifier, 3 characters (Australia East - SYD) or (Australia SouthEast - MEL)",
                        "defaultValue": "syd",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esSubIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Subscription Identifier Prefix",
                        "toolTip": "Provide a value for the subscription identifier.",
                        "defaultValue": "prd",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "text2",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Please provide Azure resource naming values:"
                        }
                    },
                    {
                        "name": "esArgIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Resource Group Identifier",
                        "toolTip": "Provide a value for the Resource Group identifier",
                        "defaultValue": "arg",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esVntIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Virtual Network Identifier",
                        "toolTip": "Provide a value for the Virtual Network identifier",
                        "defaultValue": "vnt",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esStaIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Storage Identifier",
                        "toolTip": "Provide a value for the Storage identifier",
                        "defaultValue": "sta",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esUdrIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Route Table Identifier",
                        "toolTip": "Provide a value for the Route Table identifier",
                        "defaultValue": "udr",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esNsgIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Network Security Group Identifier",
                        "toolTip": "Provide a value for the Network Security Group identifier",
                        "defaultValue": "nsg",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esAkvIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Azure Key Vault Identifier",
                        "toolTip": "Provide a value for the Azure Key Vault Identifier",
                        "defaultValue": "akv",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "esRsvIdentifier",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Recovery Services Vaults Identifier",
                        "toolTip": "Provide a value for the Recovery Services Vaults Identifier",
                        "defaultValue": "rsv",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{3}$",
                            "validationMessage": "The prefix must be 3 characters."
                        }
                    },
                    {
                        "name": "text3",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Please provide values for the Landing Zone tags:"
                        }
                    },
                    {
                        "name": "esSubscriptionTag",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Subscription Tag",
                        "toolTip": "Provide a value for the subscription tag",
                        "defaultValue": "production",
                        "constraints": {
                            "required": false
                        }
                    },
                    {
                        "name": "esOwnerTag",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Owner Tag",
                        "toolTip": "Provide a value for the owner tag",
                        "defaultValue": "tulpy",
                        "constraints": {
                            "required": false
                        }
                    },
                    {
                        "name": "esCostCenterTag",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Cost Center Tag",
                        "toolTip": "Provide a value for the Cost Center tag",
                        "defaultValue": "1234",
                        "constraints": {
                            "required": false
                        }
                    }
                ]
            },
            {
                "name": "esLz",
                "label": "Landing Zone",
                "subLabel": {
                    "preValidation": "Select 'Yes' if goal state should be enforced during deployment. Select 'No' if you want to do it post deployment using Azure Policy.",
                    "postValidation": "Done"
                },
                "bladeTitle": "Landing Zone",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "To enable the Landing Zone, you must allocate an Azure Subscription. Please note, this Azure Subscription will be moved to the chosent Management Group, where Azure Policy will drive the deployment. Insight recommend using a new, empty Azure Subscription.",
                            "uri": "https://github.com/Azure/Enterprise-Scale/blob/main/docs/reference/Readme.md"
                        }
                    },
                    {
                        "name": "subApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "textBlock1",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Select target Azure Subscription",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/management-group-and-subscription-organization"
                            }
                        }
                    },
                    {
                        "name": "esLzSub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Choose the Landing Zone Subscription",
                        "toolTip": "",
                        "multiselect": false,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": true,
                        "constraints": {
                            "allowedValues": "[map(steps('esLz').subApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": true
                        }
                    },
                    {
                        "name": "esAsc",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Azure Security Center and enable security monitoring for the Platform and resources",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAscVms",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Servers",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for all servers.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscApps",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for AppServices",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for AppServices.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscStorage",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Storage",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Storage.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscSql",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for SQL",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for SQL.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscKeyVault",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Key Vault",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Key Vault.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscArm",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Azure Resource Manager",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Resource Manager.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscDns",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for DNS",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for DNS.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscKubernetes",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Kubernetes",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Kubernetes.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscRegistries",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Container registries",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Container registries.",
                        "visible": "[equals(steps('esLz').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAkv",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Azure Key Vault.",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, an Azure Key Vault will be deployed",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "tenantApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "tenants?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esAzureAdTenant",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Azure AD Tenant (required)",
                        "toolTip": "",
                        "multiselect": false,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": "[equals(steps('esLz').esAkv, 'Yes')]",
                        "constraints": {
                            "allowedValues": "[map(steps('esLz').tenantApi.value, (tenant) => parse(concat('{\"label\":\"', tenant.displayName, '\",\"description\":\"', tenant.tenantId, '\",\"value\":\"', toLower(tenant.tenantId), '\"}')) )]"
                        }
                    },
                    {
                        "name": "esSta",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy a Storage account for diagnostics.",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, a Storage account will be deployed",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esRsv",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy a Recovery Services Vault.",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, a Recovery Services Vault will be deployed",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "budget",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "Allocate values to set the budget on the Landing Zone."
                        }
                    },
                    {
                        "name": "esBudget",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy a Budget.",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, a Budget will be deployed",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esBudgetAmount",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLz').esBudget, 'Yes')]",
                        "label": "Budget Amount",
                        "toolTip": "Provide the Budget amount in $",
                        "defaultValue": "1000"
                    },
                    {
                        "name": "esBudgetTimeGrain",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Budget Time Grain.",
                        "defaultValue": "Monthly",
                        "toolTip": "If 'Yes' is selected, a Recovery Services Vault will be deployed",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Monthly",
                                    "value": "Monthly"
                                },
                                {
                                    "label": "Quarterly",
                                    "value": "Quarterly"
                                },
                                {
                                    "label": "Annually",
                                    "value": "Annually"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esLz').esBudget, 'Yes')]"
                    },
                    {
                        "name": "esBudgetContactEmail",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLz').esBudget, 'Yes')]",
                        "label": "Budget Contact Eamils",
                        "toolTip": "Provide the Budget amount in $",
                        "defaultValue": [
                            "stephen.tulp@outlook.com"
                        ]
                    }
                ]
            },
            {
                "name": "esLzConnectivity",
                "label": "Network Connectivity (Spoke)",
                "subLabel": {
                    "preValidation": "Select 'Yes' if goal state should be enforced during deployment. Select 'No' if you want to do it post deployment using Azure Policy.",
                    "postValidation": "Done"
                },
                "bladeTitle": "Spoke Connectivity",
                "elements": [
                    {
                        "name": "esSpoke",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy the Spoke Virtual Network",
                        "defaultValue": "Yes",
                        "toolTip": "If 'Yes' is selected, a Virtual Network will be deployed.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAddress",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Virtual network CIDR Range",
                        "toolTip": "Provide address prefix in CIDR notation (e.g 10.100.0.0/16)",
                        "defaultValue": "10.50.0.0/18",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "constraints": {
                            "required": true,
                            "validationMessage": "Virtual network's address space, specified as a CIDR notation (e.g. 192.168.1.0/24)"
                        }
                    },
                    {
                        "name": "esLocationsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "locations?api-version=2019-11-01"
                        }
                    },
                    {
                        "name": "esNwLocation",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Azure Region for the Virtual Network.",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "toolTip": "Select the target Azure region for the deployment.",
                        "constraints": {
                            "allowedValues": "[map(steps('esLzConnectivity').esLocationsApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.name, '\"}')))]",
                            "required": true
                        }
                    },
                    {
                        "name": "esUdr",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy UDRs to subnets",
                        "defaultValue": "Yes",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "toolTip": "If 'Yes' is selected, UDRs will be deployed.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esHubFwIp",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLzConnectivity').esUdr, 'Yes')]",
                        "label": "Next hop address for UDR",
                        "toolTip": "Next Hop IP addresses for Route table, generally the Azure Firewall internal IP",
                        "defaultValue": "1.1.1.1",
                        "constraints": {
                            "required": true
                        }
                    },
                    {
                        "name": "esWeb",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Web Subnet",
                        "defaultValue": "Yes",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "toolTip": "If 'Yes' is selected, a subnet for Web Server will be deployed.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAddressWeb",
                        "type": "Microsoft.Common.TextBox",
                        "label": "CIDR range for the Web Subnet",
                        "toolTip": "Provide address prefix in CIDR notation (e.g 10.100.0.0/24)",
                        "defaultValue": "10.50.0.0/24",
                        "visible": "[equals(steps('esLzConnectivity').esWeb, 'Yes')]",
                        "constraints": {
                            "required": true,
                            "validationMessage": "The subnet network's address space, specified as one address prefixes in CIDR notation (e.g. 192.168.1.0/24)"
                        }
                    },
                    {
                        "name": "esApp",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Application Subnet",
                        "defaultValue": "Yes",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "toolTip": "If 'Yes' is selected, a subnet for Application Servers will be deployed.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAddressApp",
                        "type": "Microsoft.Common.TextBox",
                        "label": "CIDR range for the App Subnet",
                        "toolTip": "Provide address prefix in CIDR notation (e.g 10.100.0.0/24)",
                        "defaultValue": "10.50.1.0/24",
                        "visible": "[equals(steps('esLzConnectivity').esApp, 'Yes')]",
                        "constraints": {
                            "required": true,
                            "validationMessage": "The subnet network's address space, specified as one address prefixes in CIDR notation (e.g. 192.168.1.0/24)"
                        }
                    },
                    {
                        "name": "esData",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Data Subnet",
                        "defaultValue": "Yes",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "toolTip": "If 'Yes' is selected, a subnet for Data Servers will be deployed.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAddressData",
                        "type": "Microsoft.Common.TextBox",
                        "label": "CIDR range for the Data Subnet",
                        "toolTip": "Provide address prefix in CIDR notation (e.g 10.100.0.0/24)",
                        "defaultValue": "10.50.2.0/24",
                        "visible": "[equals(steps('esLzConnectivity').esData, 'Yes')]",
                        "constraints": {
                            "required": true,
                            "validationMessage": "The subnet network's address space, specified as one address prefixes in CIDR notation (e.g. 192.168.1.0/24)"
                        }
                    },
                    {
                        "name": "text1",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "options": {
                            "text": "Please provide details for the Hub virtual network"
                        }
                    },
                    {
                        "name": "esHubSubId",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "label": "Hub subscription Id",
                        "toolTip": "Provide the Hub subscription Id",
                        "defaultValue": "8f8224ca-1a9c-46d1-9206-1cf2a7c51de8",
                        "constraints": {
                            "required": true
                        }
                    },
                    {
                        "name": "esHubVnetName",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "label": "Hub virtual network",
                        "toolTip": "Provide the name of the Hub virtual network",
                        "defaultValue": "sjt-syd-cor-vnt-10.49.0.0",
                        "constraints": {
                            "required": true
                        }
                    },
                    {
                        "name": "esHubVnetRG",
                        "type": "Microsoft.Common.TextBox",
                        "visible": "[equals(steps('esLzConnectivity').esSpoke, 'Yes')]",
                        "label": "Hub virtual network resource group ",
                        "toolTip": "Provide the Resource Group of the Hub virtual network",
                        "defaultValue": "sjt-syd-cor-arg-network",
                        "constraints": {
                            "required": true
                        }
                    }
                ]
            }
        ],
        "outputs": {
            "companyPrefix": "[steps('esNaming').esComIdentifier]",
            "environmentPrefix": "[steps('esNaming').esSubIdentifier]",
            "locationPrefix": "[steps('esNaming').esLocIdentifier]",
            "argPrefix": "[steps('esNaming').esArgIdentifier]",
            "vntPrefix": "[steps('esNaming').esVntIdentifier]",
            "staPrefix": "[steps('esNaming').esStaIdentifier]",
            "udrPrefix": "[steps('esNaming').esUdrIdentifier]",
            "nsgPrefix": "[steps('esNaming').esNsgIdentifier]",
            "akvPrefix": "[steps('esNaming').esAkvIdentifier]",
            "rsvPrefix": "[steps('esNaming').esRsvIdentifier]",
            "subscriptionTag": "[steps('esNaming').esSubscriptionTag]",
            "ownerTag": "[steps('esNaming').esOwnerTag]",
            "costCenterTag": "[steps('esNaming').esCostCenterTag]",

            "subscriptionId": "[steps('esLz').esLzSub]",
            "enableAsc": "[steps('esLz').esAsc]",
            "enableAscForServers": "[steps('esLz').esAscVms]",
            "enableAscForAppServices": "[steps('esLz').esAscApps]",
            "enableAscForStorage": "[steps('esLz').esAscStorage]",
            "enableAscForSql": "[steps('esLz').esAscSql]",
            "enableAscForKeyVault": "[steps('esLz').esAscKeyVault]",
            "enableAscForArm": "[steps('esLz').esAscArm]",
            "enableAscForDns": "[steps('esLz').esAscDns]",
            "enableAscForKubernetes": "[steps('esLz').esAscKubernetes]",
            "enableAscForRegistries": "[steps('esLz').esAscRegistries]",
            "enableAkv": "[steps('esLz').esAkv]",
            "tenantId": "[steps('esLz').esAzureAdTenant]",
            "enableStorage": "[steps('esLz').esSta]",
            "enableRsv": "[steps('esLz').esRsv]",
            "enableBudget": "[steps('esLz').esBudget]",
            "amount": "[steps('esLz').esBudgetAmount]",
            "timeGrain": "[steps('esLz').esBudgetTimeGrain]",
            "contactEmails": "[steps('esLz').esBudgetContactEmail]",
            
            "enableSpoke": "[steps('esLzConnectivity').esSpoke]",
            "addressPrefix": "[steps('esLzConnectivity').esAddress]",
            "location": "[steps('esLzConnectivity').esNwLocation]",
            "enableUdr": "[steps('esLzConnectivity').esUdr]",
            "hubFwIp": "[steps('esLzConnectivity').esHubFwIp]",
            "enableWeb": "[steps('esLzConnectivity').esWeb]",
            "subnetMaskForWeb": "[steps('esLzConnectivity').esAddressWeb]",
            "enableApp": "[steps('esLzConnectivity').esApp]",
            "subnetMaskForApp": "[steps('esLzConnectivity').esAddressApp]",
            "enableData": "[steps('esLzConnectivity').esData]",
            "subnetMaskForData": "[steps('esLzConnectivity').esAddressData]",
            "hubSubscriptionId": "[steps('esLzConnectivity').esHubSubId]",
            "hubVnetName": "[steps('esLzConnectivity').esHubVnetName]",
            "hubVnetRG": "[steps('esLzConnectivity').esHubVnetRG]"
        }
    }
}